Основа была взята с разных настольных игр (тот же Dungeon & Dragons), а также некоторые прочие системы, которые, преимущественно, были взяты с компьютерных игр и некоторых ролевых проектах, на которых я когда-то играл. 

Взяться за перенос чего-то похожего с lufcore билдов меня смотивировал сам подход к погружению и глубокой реализации системы, а также желание переработать имеющийся механ в игре.

Оригинальная боевая система Space Station 14 была очень сильно урезана даже по сравнению со старыми кодбазами Space Station 13. Весь бой сводится либо к закликиванию/обстрелу, либо киданием мыла под ноги. 

Также я хотел попытаться сгладить барьер между разными игроками, чтобы урезать в возможностях для PowerGaming'а, и увеличить поргружение в отыгрыш.

При этом выбор именно дайсов обусловлен его случайным результатом. Конечно мы можем управлять этой "случайностью" с помощью модификаторов и других факторов. Однако то же использование формул из RPG игр ведёт к тому же задрачиванию системы, что в итоге выльется в PowerGame. Случайность позволяет также возможность нетренированному персонажу совершить какое-то действие, или же наоброт - получить полный провал во время проверки.

Большая часть проверок использует либо 1d20 (для атак) либо 2dN (для навыков).

Ах, и да, я никогда не играл на Lifeweb'e/Scorcher и прочих lufcore сборках. Далее следует контент выдуманный моим сознанием, на основе рассказов людей с discord сервера а также самостоятельного Research'инга. 
## Основные интенты

- **Combat Mode** - также по сути рассеяность/нерассеяность. Определяет, готов ли персонаж к какому либо нападению со стороны других персонажей. По сути включает возможность блокировать и защищаться от аттак, а также добавляет дополнительные преимущества в бою. Взамен всему этому персонаж начинается постепенно терять запас стамины, что вынуждает не находиться очень долго в боевом режиме.

- **Dodge** - интент, позволяющий уворачиваться при атаках. Сильно зависит от ловкости и перегруженности персонажа. Также позволяет увернуться от стрел, болтов и пуль.

- **Parry** - интент, позволяющий паррировать атаки. Зависит от навыка владения оружием. По сути самая универсальная опция по сравнению с **Dodge**, ибо не требует проверок на ловкость. Однако персонаж никак не защищён, если он стоит спиной к опоненту. Также с помощью паррирования нельзя отбивать пули (серьезно?).

## Прочие интенты

- **Jump** - позволяет прыгать, не более. Если нужно перепрыгнуть через этаж, используйте это. Дальность и точность прыжка зависит от силы и перегруза персонажа.

- **Kick** - позволяет пнуть кого-то. Если опонент стоит у обрыва, не грех воспользоваться данной возможностью и скинуть его вниз. Сила пинка зависит от силы. 

- **Climb** - позволяет залезать на верхний этаж на стену (с условием что над ней есть тайл или стена IsRoof). Также позволяет спускаться вниз, если снизу есть тайл при клике на позицию.

- **Look up** - позволяет посмотреть наверх.

## Навыки

Проверка на навык осуществляется с помощью двух костей. При этом сами грани зависят от текущего уровня навыка:
- Слабый (Weak) - 2d4
- Базовый (Basic) - 2d6
- Тренированый (Trained) - 2d8
- Опытный (Experienced) - 2d10
- Мастер (Master) - 2d12
- Легендарный (Legendary) - 2d20

В игре явно должна присутствовать возможность повышать навыки. Для этого нужен отдельный счётчик знаний и полоска опыта под каждый уровень. 
Далее всё просто - используем навык и одновременно качаем его. 
При этом процесс обучения можно ускорить с помощью теоретической литературы, найденной в библеотеках. 

С увелечением уровня следует переутомляемость, накладывающая усталость на персонажа. Далее ему следует отдохнуть в постеле, где в последствии пишится информация в чат, что при отдыхе персонаж смог изучить какое-то новое умение/навык.

## Атака

### Melee

Суть достаточно проста. Если персонаж атакует опонента, идёт проверка - насторожен ли он (CombatMode). 
Если нет - персонаж наносит повреждение игнорируя увороты или паррирование опонента.

Но для начала атакующий должен сделать бросок на удачу, дабы попасть в конечность/туловище:
- 2dN(навык ближ. боя)+(мод. ловкость)-(штраф мод. конечности)
Если неудача - атакующий промазал по цели.

Далее если опонент находится в боевом режиме и прошла проверка на попадание атакующим - опонент автоматически попытается защищиться взависимости от выбранного интента защиты. 
Пробрасывается кубик от опонента при увороте: 
- 1d20+(мод. ловкости)-(штраф мод. от перегруза)-(штраф мод. от стамины).
Для защиты же понадобится проверка навыка:
- 2dN(навык ближ. боя)+(мод. восприятия)+(мод. (или штраф) от интента)+(мод. от щитов)
Если при пороге 6 выпало больше - персонаж получает модификатор 10 и выбрасывает кость по следующей формуле:
- 1d20+(мод. ловкость)+(мод. от оружия)-(штраф мод. от перегруза)-(штраф мод. от стамины)+10;

Если атакующий производит финт в сторону опонента и тот удачно парирует - на опонента накладывается небольшой эффект, при котором атакующий сможет проигнорировать парирование при следующей атаки на опонента. При этом атакующий не наносит урон, и должен будет быстро переключиться между интентами.

При этом важно учитывать что если у опонента присутствуют гуманойдные конечности (аки обычный TargetDoll), то можно бить ему в конечности. Каждая конечность накидывает дополнительный штраф модификатор на проверку атакуещему. Далее бросает атакующий: 
- 1d20+(мод. ловкость)+(мод. от оружия)-(штраф мод. конечности)-(штраф мод. от перегруза)-(штраф мод. от стамины).
Это обусловлено тем, что персонаж может попытаться ударить/резануть/пырнуть в голову, в глотку, в пах, руки и другие места, что могут привести к более критичным последствиям, по сравнению с нанесением в торс. 
Удары в торс при этом не дают особых преимуществ. По сути своей это обычные generic удары на манер оригинальной станции, универсальный вариант для всех ситуаций, когда нету расскаченных навыков или же не хочется заниматься аимингом.

В итоге броска - тот, у кого результат броска больше(или же крит. удача) - сможет удачно атаковать, увернуться или отбить атаку. Иначе же его ждёт промах или пойманный удар в определённую область (при крит. неудачи не будет проверок на увороты/защиту).

### Ranged

Ситуация почти что аналогичная. Однако в этом случае стоит учесть два варианта:
- Кидает какие-то предметы (ножи, кружки, чашки, осколки стекла).
- Персонаж использует оружие, что стреляет проджектайлами (пулями, стрелами, болтами).

#### Items

Атакующий может бросить любой предмет в опонента, однако в свою очередь опонент может попытаться схватить предмет войдя в режим **Throw**.

Для начала атакующему нужно пробросить - может ли предмет попасть в персонажа на дистанции:
- 2dN(навык меткость)+(мод. ловкости)-(штраф мод. от конечности)-(штраф мод. на растояние)

Это позволит пасивно ему поймать предмет. При этом сам опонент должен смотреть в сторону, откуда летит предмет. Формула следующая:
- 2dN(навык чутьё)+(мод. восприятия).
Это позволит вовремя обнаружить летящий предмет и поймать его. Базовый порог проверки - 6. Если персонаж стоит спиной - 12.

В случае, если опонент пытается поймать или увернуться от предмета, атакующий должен также прокинуть бросок на меткость (ибо мы также можем целиться в конечности).
Иначе же просчитывается уже следующая формула
- 1d20+(мод. ловкости)-(штраф мод. от перегруза)-(штраф мод. от стамины)

Далее если опонент пытается поймать предмет, если он всё ещё находится в **Throw** режиме, ему также даётся бонусный модификатор 5. Вычитывается по формуле: 
- 1d20+(мод. ловкости)-(штраф мод. от перегруза)-(штраф мод. от стамины)+5
Если же **Throw** выключен, но включен **CombatMode**, персонаж попытается увернуться (без модификатора).
- 1d20+(мод. ловкости)-(штраф мод. от перегруза)-(штраф мод. от стамины)

При этом активная рука должна быть пустой, дабы в случае успеха персонаж поймал предмет и сунул себе в руку. Либо же он может войти в боевой режим, чтобы увернуться. 
Далее если атакующий имеет больший ролл или крит. удачу - он удачно попадает в нужную ему конечность. 
Иначе же провал и мяч попадает ему по голове!

#### Guns/Marksmanship

Механика огнестрела - **TODO**

## Критическая Удача/Неудача

На манер некоторых классических ролёвок, присутствует также некий рандом в действиях.

Возьмем пример боя: Так если при броске 1d20 выпадает 1 - это автоматически считается неудачей (что в бою автоматически в данном действии выигрывает опонент). А также обратная ситуация - выпадает 20, что является крит. удачей (также игнорируются все проверки, но со стороны опонента).
В данных случаям одной из сторон не нужно делать никаких доп. проверок или добавления модификаторов, ибо в данной ситуации уже определён победитель (на манер раундов в turn-based играх, только заместо них у нас обычные действия с проверками).

## Список боевых интентов

- **Defend** - бонус к парированию (+4), штраф к урону, понижает скорость персонажа. Повышает уязвимость к финтам.
- **Strong** - бонус к урону (от силы (+6 к аттрибуту)), приводит к большей усталости (даже на ЛКМ атаки).
- **Aimed** - бонус к точности (+4), штраф к скорости атаки (x1.5).
- **Weak** - штраф к урону, подходит больше для тренировок и тумаков.
- **Feint** - позволяет исполнять фальшивую атаку в сторону опонента, на котороткое время октрывая его для следующей атаки (накладывая на него эффект). При этом не наносит урона.
- **Dual** - позволяет атаковать с двух рук двумя атаками (каждая атака пробрасывается отдельно) (с помощью ПКМ позволяет бить из доп. руки), штраф к точности (-4)
- **Furious** - штраф у опонента при парировании (-4), штраф у атакующего на урон. Уменьшает кулдаун между атаками ( (-)x1.5 )

## Как работает парирование

Ничего особенного. Скорее просто требуется оружие в активной руке с компонент ParryableComponent.

Однако есть и исключения - щиты и прочие предметы, которые тоже должны находиться в руке, но не требующей того чтобы рука была активной. 